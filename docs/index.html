<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="theme-color" content="#070a12"/>
  <title>GraTech ‚Ä¢ Comet‚ÄëX | Sovereign Control Room</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Fonts: Arabic + Latin -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@200;300;400;500;700;800;900&family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg0:#050812;
      --bg1:#070a12;
      --panel:rgba(255,255,255,.06);
      --stroke:rgba(148,163,184,.18);
      --text:rgba(226,232,240,.92);
      --muted:rgba(226,232,240,.72);
      --faint:rgba(226,232,240,.55);
      --neon:#22d3ee;
      --violet:#a78bfa;
      --emerald:#34d399;
      --rose:#fb7185;
      --amber:#fbbf24;
    }

    html{ scroll-behavior:smooth; }
    body{
      font-family: Tajawal, Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color: var(--text);
      background:
        radial-gradient(900px 600px at 20% 10%, rgba(34,211,238,.18), transparent 55%),
        radial-gradient(900px 600px at 80% 15%, rgba(167,139,250,.16), transparent 55%),
        radial-gradient(900px 600px at 50% 90%, rgba(52,211,153,.10), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x:hidden;
    }

    /* Typography system (not random) */
    .t-display{ font-weight:900; letter-spacing:-.02em; line-height:1.05; font-size: clamp(2rem, 3.8vw, 3.5rem); }
    .t-h1{ font-weight:900; letter-spacing:-.01em; line-height:1.12; font-size: clamp(1.5rem, 2.4vw, 2.2rem); }
    .t-h2{ font-weight:800; letter-spacing:-.01em; line-height:1.15; font-size: clamp(1.15rem, 1.8vw, 1.5rem); }
    .t-body{ font-size: 1.02rem; line-height: 1.85; color: var(--muted); }
    .t-small{ font-size: .86rem; line-height: 1.7; color: var(--faint); }

    .glass{ background: var(--panel); border: 1px solid var(--stroke); backdrop-filter: blur(10px); }
    .soft{ box-shadow: 0 22px 75px rgba(0,0,0,.35); }
    .chip{ border:1px solid rgba(148,163,184,.22); background: rgba(255,255,255,.04); }
    .chip:hover{ background: rgba(255,255,255,.08); }

    .tab-active{ border-bottom: 3px solid var(--neon); color: var(--neon); font-weight: 900; }
    .tab-idle{ color: rgba(226,232,240,.70); }
    .fade{ animation: fade .35s ease-out; }
    @keyframes fade{ from{ opacity:0; transform: translateY(10px);} to{ opacity:1; transform: translateY(0);} }

    /* Better RTL/LTR spacing */
    [dir="rtl"] .list-pad { padding-right: 1.2rem; padding-left: 0; }
    [dir="ltr"] .list-pad { padding-left: 1.2rem; padding-right: 0; }

    .kbd{
      border:1px solid rgba(148,163,184,.25);
      background: rgba(255,255,255,.06);
      padding:2px 8px;
      border-radius: 10px;
      font-size: .78rem;
      color: rgba(226,232,240,.85);
    }

    /* Timeline */
    .timeline{ position: relative; }
    .timeline:before{
      content:"";
      position:absolute;
      top:.5rem; bottom:.5rem;
      width:2px;
      background: rgba(148,163,184,.20);
      right: 1rem;
    }
    [dir="ltr"] .timeline:before{ left: 1rem; right:auto; }
    .tl-item{ position: relative; padding: 1rem 1rem 1rem 3rem; }
    [dir="ltr"] .tl-item{ padding: 1rem 3rem 1rem 1rem; }
    .dot{
      position:absolute;
      width: 12px; height: 12px;
      background: var(--neon);
      box-shadow: 0 0 0 5px rgba(34,211,238,.14);
      border-radius: 999px;
      top: 1.35rem;
      right: .6rem;
    }
    [dir="ltr"] .dot{ left: .6rem; right:auto; }
  </style>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { neon: '#22d3ee' }
        }
      }
    }
  </script>
</head>

<body>
  <!-- Top -->
  <header class="sticky top-0 z-50">
    <div class="mx-auto max-w-6xl px-4 py-4">
      <div class="glass soft rounded-2xl px-4 py-3 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="w-2.5 h-2.5 rounded-full bg-emerald-400 animate-pulse"></div>
          <div class="leading-tight">
            <div class="font-black tracking-wide text-lg">
              <span class="text-white">GraTech</span>
              <span class="text-cyan-300"> ‚Ä¢ Comet‚ÄëX</span>
            </div>
            <div id="statusLine" class="text-xs text-slate-300"></div>
          </div>
        </div>

        <div class="flex items-center gap-2">
          <button id="btnLang" class="chip px-3 py-2 rounded-xl text-sm transition">AR / EN</button>
          <a id="btnLive" class="chip px-3 py-2 rounded-xl text-sm transition" target="_blank" rel="noopener">Live ‚Üó</a>
        </div>
      </div>
    </div>
  </header>

  <main class="mx-auto max-w-6xl px-4 pb-16">
    <!-- Hero -->
    <section class="mt-6 glass soft rounded-3xl p-6 md:p-10">
      <div class="flex flex-col md:flex-row md:items-start md:justify-between gap-8">
        <div class="max-w-3xl">
          <h1 id="heroTitle" class="t-display"></h1>
          <p id="heroSub" class="mt-5 t-body"></p>

          <div class="mt-6 flex flex-wrap gap-2">
            <span class="chip px-3 py-1.5 rounded-full text-xs">SOVEREIGN</span>
            <span class="chip px-3 py-1.5 rounded-full text-xs">Cognitive Rights</span>
            <span class="chip px-3 py-1.5 rounded-full text-xs">Open Protocols</span>
            <span class="chip px-3 py-1.5 rounded-full text-xs">Agents</span>
            <span class="chip px-3 py-1.5 rounded-full text-xs">Metrics</span>
          </div>

          <div class="mt-6 text-sm text-slate-300">
            <span id="quoteLine"></span>
            <span class="mx-2">‚Ä¢</span>
            <span class="kbd" id="kbd1"></span>
            <span class="kbd" id="kbd2"></span>
            <span class="kbd" id="kbd3"></span>
          </div>
        </div>

        <!-- KPI panel -->
        <aside class="w-full md:w-[380px] glass rounded-2xl p-5">
          <div class="flex items-center justify-between">
            <div>
              <div id="kpiTitle" class="text-xs text-slate-300"></div>
              <div class="text-2xl font-black text-cyan-300">SOVEREIGN ONLINE</div>
              <div class="mt-1 text-xs text-slate-400" id="buildLine"></div>
            </div>
            <div class="text-3xl">üõ∞Ô∏è</div>
          </div>

          <div class="mt-4 grid grid-cols-3 gap-3">
            <div class="glass rounded-xl p-3">
              <div class="text-[11px] text-slate-300" id="kpi1Label"></div>
              <div class="text-lg font-extrabold" id="kpi1Val"></div>
            </div>
            <div class="glass rounded-xl p-3">
              <div class="text-[11px] text-slate-300" id="kpi2Label"></div>
              <div class="text-lg font-extrabold" id="kpi2Val"></div>
            </div>
            <div class="glass rounded-xl p-3">
              <div class="text-[11px] text-slate-300" id="kpi3Label"></div>
              <div class="text-lg font-extrabold" id="kpi3Val"></div>
            </div>
          </div>

          <div class="mt-4 t-small" id="kpiFoot"></div>

          <div class="mt-4 grid grid-cols-2 gap-3">
            <a href="#principles" class="chip rounded-xl px-4 py-3 text-sm transition">Principles ‚Üì</a>
            <a href="#roadmap" class="chip rounded-xl px-4 py-3 text-sm transition">Roadmap ‚Üì</a>
          </div>
        </aside>
      </div>
    </section>

    <!-- Principles / manifesto detail -->
    <section id="principles" class="mt-8 grid md:grid-cols-3 gap-4">
      <div class="glass soft rounded-2xl p-6 md:col-span-2">
        <div class="t-h1 text-white" id="manifestoTitle"></div>
        <p class="mt-3 t-body" id="manifestoBody"></p>

        <div class="mt-6 grid sm:grid-cols-2 gap-4">
          <div class="glass rounded-2xl p-5">
            <div class="t-h2 text-cyan-300" id="p1Title"></div>
            <p class="mt-2 t-small" id="p1Body"></p>
          </div>
          <div class="glass rounded-2xl p-5">
            <div class="t-h2 text-cyan-300" id="p2Title"></div>
            <p class="mt-2 t-small" id="p2Body"></p>
          </div>
          <div class="glass rounded-2xl p-5">
            <div class="t-h2 text-cyan-300" id="p3Title"></div>
            <p class="mt-2 t-small" id="p3Body"></p>
          </div>
          <div class="glass rounded-2xl p-5">
            <div class="t-h2 text-cyan-300" id="p4Title"></div>
            <p class="mt-2 t-small" id="p4Body"></p>
          </div>
        </div>
      </div>

      <div class="glass soft rounded-2xl p-6">
        <div class="t-h1 text-white" id="threatTitle"></div>
        <ul class="mt-4 text-sm text-slate-200 list-disc list-pad space-y-2" id="threatList"></ul>
        <div class="mt-4 text-xs text-slate-400" id="threatFoot"></div>
      </div>
    </section>

    <!-- Tabs -->
    <section class="mt-10">
      <div class="glass soft rounded-2xl px-4 py-3">
        <div class="flex gap-4 overflow-x-auto whitespace-nowrap">
          <button class="tab tab-active px-4 py-2" data-tab="identity" id="tabIdentity"></button>
          <button class="tab tab-idle px-4 py-2" data-tab="architecture" id="tabArchitecture"></button>
          <button class="tab tab-idle px-4 py-2" data-tab="roadmapTab" id="tabRoadmap"></button>
          <button class="tab tab-idle px-4 py-2" data-tab="impact" id="tabImpact"></button>
        </div>
      </div>

      <div class="mt-4">
        <!-- Identity -->
        <div id="view-identity" class="view fade">
          <div class="grid md:grid-cols-3 gap-4">
            <div class="glass rounded-2xl p-5 hover:bg-white/10 transition cursor-pointer" onclick="openModal('identity_core')">
              <div class="text-cyan-300 font-extrabold" id="card1Title"></div>
              <div class="mt-2 t-small" id="card1Body"></div>
            </div>
            <div class="glass rounded-2xl p-5 hover:bg-white/10 transition cursor-pointer" onclick="openModal('identity_threats')">
              <div class="text-cyan-300 font-extrabold" id="card2Title"></div>
              <div class="mt-2 t-small" id="card2Body"></div>
            </div>
            <div class="glass rounded-2xl p-5 hover:bg-white/10 transition cursor-pointer" onclick="openModal('identity_response')">
              <div class="text-cyan-300 font-extrabold" id="card3Title"></div>
              <div class="mt-2 t-small" id="card3Body"></div>
            </div>
          </div>

          <div class="mt-6 glass rounded-2xl p-4">
            <div class="flex items-center justify-between mb-3">
              <div class="font-black" id="chart1Title"></div>
              <div class="text-xs text-slate-300" id="chart1Hint"></div>
            </div>
            <div class="h-[360px]">
              <canvas id="chartIdentity"></canvas>
            </div>
          </div>
        </div>

        <!-- Architecture -->
        <div id="view-architecture" class="view hidden fade">
          <div class="grid md:grid-cols-3 gap-4">
            <div class="glass rounded-2xl p-6">
              <div class="font-black text-cyan-300" id="archA"></div>
              <p class="mt-2 t-small" id="archADesc"></p>
              <ul class="mt-3 text-sm text-slate-200 list-disc list-pad space-y-1.5" id="archAList"></ul>
            </div>
            <div class="glass rounded-2xl p-6">
              <div class="font-black text-cyan-300" id="archB"></div>
              <p class="mt-2 t-small" id="archBDesc"></p>
              <ul class="mt-3 text-sm text-slate-200 list-disc list-pad space-y-1.5" id="archBList"></ul>
            </div>
            <div class="glass rounded-2xl p-6">
              <div class="font-black text-cyan-300" id="archC"></div>
              <p class="mt-2 t-small" id="archCDesc"></p>
              <ul class="mt-3 text-sm text-slate-200 list-disc list-pad space-y-1.5" id="archCList"></ul>
            </div>
          </div>

          <div class="mt-6 glass rounded-2xl p-4">
            <div class="flex items-center justify-between mb-3">
              <div class="font-black" id="chart2Title"></div>
              <div class="text-xs text-slate-300" id="chart2Hint"></div>
            </div>
            <div class="h-[320px]">
              <canvas id="chartArchitecture"></canvas>
            </div>
          </div>
        </div>

        <!-- Roadmap Tab -->
        <div id="view-roadmapTab" class="view hidden fade">
          <div id="roadmap" class="grid md:grid-cols-2 gap-4">
            <div class="glass soft rounded-2xl p-6">
              <div class="t-h1 text-white" id="roadTitle"></div>
              <p class="mt-3 t-body" id="roadIntro"></p>

              <div class="mt-5 timeline" id="roadTimeline"></div>
            </div>

            <div class="glass rounded-2xl p-4">
              <div class="flex items-center justify-between mb-3">
                <div class="font-black" id="chart3Title"></div>
                <div class="text-xs text-slate-300" id="chart3Hint"></div>
              </div>
              <div class="h-[360px]">
                <canvas id="chartRoadmap"></canvas>
              </div>
            </div>
          </div>
        </div>

        <!-- Impact -->
        <div id="view-impact" class="view hidden fade">
          <div class="grid md:grid-cols-2 gap-4">
            <div class="glass rounded-2xl p-6">
              <div class="font-black text-cyan-300" id="impactEcoTitle"></div>
              <p class="mt-2 t-small" id="impactEcoBody"></p>
              <div class="mt-4 grid grid-cols-3 gap-2" id="impactEcoKpis"></div>
            </div>
            <div class="glass rounded-2xl p-6">
              <div class="font-black text-cyan-300" id="impactSocTitle"></div>
              <p class="mt-2 t-small" id="impactSocBody"></p>
              <div class="mt-4 grid grid-cols-3 gap-2" id="impactSocKpis"></div>
            </div>
          </div>

          <div class="mt-6 glass rounded-2xl p-4">
            <div class="flex items-center justify-between mb-3">
              <div class="font-black" id="chart4Title"></div>
              <div class="text-xs text-slate-300" id="chart4Hint"></div>
            </div>
            <div class="h-[320px]">
              <canvas id="chartImpact"></canvas>
            </div>
          </div>

          <div class="mt-6 glass rounded-2xl p-6">
            <div class="t-h1 text-white" id="faqTitle"></div>
            <div class="mt-4 space-y-3" id="faq"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="mt-10 text-center">
      <div class="glass soft rounded-2xl py-6">
        <div class="font-black text-slate-100" id="footerLine"></div>
        <div class="mt-2 text-xs text-slate-400 font-mono">GrAtechX ‚Ä¢ Comet‚ÄëX ‚Ä¢ v1.1 ‚Ä¢ Sovereign Control Room</div>
      </div>
    </footer>
  </main>

  <!-- Modal -->
  <div id="modal" class="hidden fixed inset-0 z-[100] bg-black/60 p-4 items-center justify-center">
    <div class="glass soft rounded-2xl max-w-xl w-full p-6">
      <div class="flex items-start justify-between gap-4">
        <div>
          <div id="modalTitle" class="text-xl font-black text-cyan-300"></div>
          <div id="modalBody" class="mt-3 t-body"></div>
        </div>
        <button id="modalClose" class="chip px-3 py-2 rounded-xl hover:bg-white/10 transition">‚úï</button>
      </div>
    </div>
  </div>

<script>
  const SITE = { liveUrl: "https://khawrizm.github.io/cometx-manifesto/" };

  const I18N = {
    ar: {
      statusLine: "SOVEREIGN ONLINE ‚Ä¢ ŸÑŸàÿ≠ÿ© ÿ≥ŸäÿßÿØŸäÿ© ŸÖÿ™ÿπÿØÿØÿ© ÿßŸÑŸÑÿ∫ÿßÿ™ ‚Ä¢ ÿµŸÅÿ≠ÿßÿ™ ÿ´ÿßÿ®ÿ™ÿ© ÿ®ÿØŸàŸÜ ÿ®ŸÜÿßÿ°",
      heroTitle: "ÿ∫ÿ±ŸÅÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ ÿßŸÑÿ≥ŸäÿßÿØŸäÿ©",
      heroSub: "Ÿàÿßÿ¨Ÿáÿ© Manifesto ŸÖÿµŸÖŸÖÿ© ÿ®ŸÖŸÜŸáÿ¨Ÿäÿ©: ŸáŸàŸäÿ© ‚Ä¢ ŸÖÿπŸÖÿßÿ±Ÿäÿ© ‚Ä¢ ŸÖÿ≥ÿßÿ± ‚Ä¢ ÿ£ÿ´ÿ± ‚Äî ŸàŸÉŸÑ ÿ≥ÿ∑ÿ± ŸÅŸäŸáÿß ŸäÿÆÿØŸÖ ŸÖÿπŸÜŸâ ÿßŸÑÿ≥ŸäÿßÿØÿ© ÿßŸÑŸÖÿπÿ±ŸÅŸäÿ©.",
      quoteLine: "¬´ŸÜÿ≠ŸÜ ŸÑÿß ŸÜÿ®ŸÜŸä ŸÖÿ™ÿµŸÅÿ≠ÿßŸã‚Ä¶ ŸÜÿ≠ŸÜ ŸÜÿ®ŸÜŸä ŸÉŸäÿßŸÜÿßŸã ÿ±ŸÇŸÖŸäÿßŸã Ÿäÿ≥ÿ™ÿ±ÿØ ÿ≠ŸÇ ÿßŸÑÿ•ŸÜÿ≥ÿßŸÜ ŸÅŸä ÿ≥ŸäÿßÿØÿ™Ÿá ÿßŸÑŸÖÿπÿ±ŸÅŸäÿ©.¬ª",
      kbd1: "ŸÜÿ∏ÿßŸÖ ÿÆÿ∑",
      kbd2: "Manifesto",
      kbd3: "Roadmap",
      kpiTitle: "ŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿ≥ŸäÿßÿØŸäÿ©",
      kpi1Label: "ÿßŸÑÿ¥ŸÅÿßŸÅŸäÿ©", kpi1Val: "92%",
      kpi2Label: "ÿßŸÑÿÆÿµŸàÿµŸäÿ©", kpi2Val: "89%",
      kpi3Label: "ÿßŸÑÿ´ŸÇÿ©",     kpi3Val: "86%",
      buildLine: "Build: Static ‚Ä¢ Deploy: GitHub Pages",
      kpiFoot: "Ÿáÿ∞Ÿá ŸÇŸäŸÖ ŸÖÿπŸäÿßÿ±Ÿäÿ© ŸÇÿßÿ®ŸÑÿ© ŸÑŸÑÿ±ÿ®ÿ∑ ŸÑÿßÿ≠ŸÇÿßŸã ÿ®ÿ®ŸäÿßŸÜÿßÿ™ ÿ≠ŸÇŸäŸÇŸäÿ© (Logs/Metrics/Policies).",

      manifestoTitle: "ÿßŸÑŸÖÿßŸÜŸäŸÅÿ≥ÿ™Ÿà ‚Äî ŸÑŸÖÿßÿ∞ÿß Comet‚ÄëXÿü",
      manifestoBody: "ÿßŸÑÿ≥ŸäÿßÿØÿ© ÿßŸÑŸÖÿπÿ±ŸÅŸäÿ© ŸÑŸäÿ≥ÿ™ ÿ¥ÿπÿßÿ±ÿßŸãÿõ ŸáŸä ÿ®ŸÜŸäÿ© ŸÇÿ±ÿßÿ±. ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ ÿßŸÑŸÖÿπÿ±ŸÅÿ© ÿ™Ÿèÿµÿßÿ∫ ÿÆÿßÿ±ÿ¨ ÿ≥ŸäÿßŸÇ ÿßŸÑÿ•ŸÜÿ≥ÿßŸÜÿå ÿ™Ÿèÿµÿ®ÿ≠ ÿ£ÿØÿßÿ© ÿπŸÑŸäŸá. Comet‚ÄëX ŸäÿπŸäÿØ ŸÖŸÑŸÉŸäÿ© ÿßŸÑŸÇÿ±ÿßÿ±: ŸÖŸÜ ÿ£ŸäŸÜ ÿ™ÿ£ÿ™Ÿä ÿßŸÑŸÖÿπŸÑŸàŸÖÿ©ÿü ŸÉŸäŸÅ ÿ™ŸèŸÅŸáŸÖÿü ŸÖŸÜ Ÿäÿ±ÿßŸáÿßÿü ŸàŸÉŸäŸÅ ÿ™Ÿèÿ≥ÿ™ÿÆÿØŸÖÿü",
      p1Title: "ÿ≠ŸÇ ÿßŸÑÿ≥ŸäÿßŸÇ", p1Body: "ÿ£Ÿä ŸÖÿπŸÑŸàŸÖÿ© ÿ®ÿØŸàŸÜ ÿ≥ŸäÿßŸÇ ÿ™Ÿèÿµÿ®ÿ≠ ÿ™ÿ∂ŸÑŸäŸÑÿßŸã. ŸÜÿ´ÿ®ÿ™ ÿßŸÑŸÖÿµÿØÿ±ÿå ÿßŸÑŸÜŸäÿ©ÿå ŸàÿßŸÑÿ≤ŸÖŸÜ‚Ä¶ ŸÇÿ®ŸÑ ÿ£ŸÜ ŸÜÿπÿ±ÿ∂ ÿßŸÑŸÜÿßÿ™ÿ¨.",
      p2Title: "ÿ≠ŸÇ ÿßŸÑŸÜŸÇŸÑ", p2Body: "ÿ®ŸäÿßŸÜÿßÿ™ŸÉ ŸÑŸäÿ≥ÿ™ ÿ±ŸáŸäŸÜÿ© ŸÖŸÜÿµÿ©. ÿßŸÑÿ™ÿµŸÖŸäŸÖ ÿßŸÑÿ≥ŸäÿßÿØŸä ŸäŸÅÿ™ÿ±ÿ∂ ŸÇÿßÿ®ŸÑŸäÿ© ÿßŸÑŸÜŸÇŸÑ ŸàÿßŸÑÿ™ÿØŸÇŸäŸÇ ŸÖŸÜÿ∞ ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ£ŸàŸÑ.",
      p3Title: "ÿ≠ŸÇ ÿßŸÑÿ¥ŸÅÿßŸÅŸäÿ©", p3Body: "ÿßŸÑÿÆŸàÿßÿ±ÿ≤ŸÖŸäÿ© ÿµŸÜÿØŸàŸÇ ÿ£ÿ≥ŸàÿØÿü ŸÖÿ±ŸÅŸàÿ∂. ŸÜÿπÿ±ÿ∂ ÿ£ÿ´ÿ± ÿßŸÑŸÇÿ±ÿßÿ± ŸàŸÖÿ≥ÿßÿ± ÿßŸÑÿ™ŸàŸÑŸäÿØ Ÿàÿ™ÿ∫ŸäŸëÿ± ÿßŸÑÿ≠ÿßŸÑÿ©.",
      p4Title: "ÿ≠ŸÇ ÿßŸÑŸàŸÉÿßŸÑÿ©", p4Body: "ÿßŸÑŸàŸÉŸäŸÑ ŸÑÿß ŸäŸÇŸàÿØ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ‚Ä¶ ÿ®ŸÑ ŸäŸÜŸÅÿ∞ ŸÜŸàÿßŸäÿßŸá ÿ™ÿ≠ÿ™ ÿ≥Ÿäÿßÿ≥ÿßÿ™Ÿá Ÿàÿ≠ÿØŸàÿØŸá.",

      threatTitle: "ŸÜŸÖŸàÿ∞ÿ¨ ÿßŸÑÿ™ŸáÿØŸäÿØ",
      threatList: [
        "ÿßŸÑÿßÿ≠ÿ™ŸÉÿßÿ±: ŸÖŸÜÿµÿßÿ™ ÿ™ÿ≠ÿØÿØ ŸÖÿß ÿ™ÿ±ÿßŸá ŸàŸÖÿß ŸÑÿß ÿ™ÿ±ÿßŸá",
        "ÿ≠ÿ®ÿ≥ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™: ŸÇŸÅŸÑ ÿßŸÑÿ™ÿµÿØŸäÿ± ŸàÿßŸÑŸÜŸÇŸÑ ŸàÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©",
        "ÿßŸÑÿ™ÿ™ÿ®ÿπ: ŸÖŸÑŸÅÿßÿ™ ÿ™ÿπÿ±ŸäŸÅ Ÿàÿ•ÿπŸÑÿßŸÜÿßÿ™ ŸàŸÇŸäÿßÿ≥ ÿ®ŸÑÿß ÿ•ÿ∞ŸÜ Ÿàÿßÿ∂ÿ≠",
        "ÿßŸÑÿ™ÿ≠Ÿäÿ≤: ŸÜŸÖÿßÿ∞ÿ¨ ÿ™ŸèÿπŸäÿØ ÿ•ŸÜÿ™ÿßÿ¨ ÿ™ŸÅÿ∂ŸäŸÑÿßÿ™ ÿÆÿßÿ±ÿ¨Ÿäÿ©",
        "ÿßŸÜŸáŸäÿßÿ± ÿßŸÑÿ≥ŸäÿßŸÇ: ÿßŸÇÿ™ÿ∑ÿßÿπ ÿßŸÑŸÉŸÑÿßŸÖ ŸÖŸÜ ŸÖÿπŸÜÿßŸá"
      ],
      threatFoot: "ÿßŸÑÿ±ÿØ: ÿ®ÿ±Ÿàÿ™ŸàŸÉŸàŸÑÿßÿ™ ŸÖŸÅÿ™Ÿàÿ≠ÿ© + ÿ≥ÿ¨ŸÑÿßÿ™ ÿ¥ŸÅÿßŸÅÿ© + ÿ≥Ÿäÿßÿ≥ÿßÿ™ ŸáŸàŸäÿ© + ŸÇŸäÿßÿ≥ ÿπÿßÿØŸÑ.",

      tabIdentity: "ÿßŸÑŸáŸàŸäÿ© ŸàÿßŸÑÿµÿ±ÿßÿπ",
      tabArchitecture: "ŸÖÿπŸÖÿßÿ±Ÿäÿ© Tri‚ÄëLobe",
      tabRoadmap: "ÿßŸÑŸÖÿ≥ÿßÿ± ŸàÿßŸÑŸàÿ¨Ÿáÿ©",
      tabImpact: "ÿßŸÑÿ£ÿ´ÿ± ŸàÿßŸÑÿ¨ÿØŸàŸâ",

      card1Title: "ÿ¨ŸàŸáÿ± ÿßŸÑŸáŸàŸäÿ©", card1Body: "ÿ™ÿπÿ±ŸäŸÅ ÿßŸÑÿ≥ŸäÿßÿØÿ© ŸÉÿ≠ŸÇ ÿ±ŸÇŸÖŸä: ŸáŸàŸäÿ© ŸÇÿßÿ®ŸÑÿ© ŸÑŸÑÿ™ÿ≠ŸÇŸÇ Ÿàÿ≥Ÿäÿßÿ≥ÿßÿ™ ÿ±ÿ§Ÿäÿ©.",
      card2Title: "ÿßŸÑÿ™ŸáÿØŸäÿØÿßÿ™",   card2Body: "ŸáŸäŸÖŸÜÿ© ÿßŸÑŸÖŸÜÿµÿßÿ™ÿå ÿßŸÑÿ™ÿ™ÿ®ÿπÿå ÿ≠ÿ®ÿ≥ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ÿå ŸàŸÅŸÇÿØÿßŸÜ ÿßŸÑÿ≥ŸäÿßŸÇ.",
      card3Title: "ÿßŸÑÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ©",   card3Body: "ŸàŸÉŸÑÿßÿ° + ÿ®ÿ±Ÿàÿ™ŸàŸÉŸàŸÑÿßÿ™ + ŸÇŸäÿßÿ≥ + ÿ≠ŸàŸÉŸÖÿ© = ŸÇÿ±ÿßÿ± ÿ≥ŸäÿßÿØŸä.",

      modal: {
        identity_core: { title: "ÿ¨ŸàŸáÿ± ÿßŸÑŸáŸàŸäÿ©", body: "ÿßŸÑŸáŸàŸäÿ© ŸáŸÜÿß ŸÑŸäÿ≥ÿ™ ÿ≠ÿ≥ÿßÿ®ÿßŸã‚Ä¶ ÿ®ŸÑ 'ÿ≥ŸÑÿ∑ÿ© ŸÇÿ±ÿßÿ±'. ÿ£ŸÜÿ™ ÿ™ÿ≠ÿØÿØ ŸÖÿß ŸäÿØÿÆŸÑÿå ŸÖÿß ŸäÿÆÿ±ÿ¨ÿå ŸàŸÖÿß ŸäŸèÿ®ŸÜŸâ ÿπŸÑŸâ ÿ®ŸäÿßŸÜÿßÿ™ŸÉ." },
        identity_threats:{ title: "ÿßŸÑÿ™ŸáÿØŸäÿØÿßÿ™", body: "ÿπŸÜÿØŸÖÿß ÿ™ŸèÿØÿßÿ± ÿßŸÑŸÖÿπÿ±ŸÅÿ© ÿπÿ®ÿ± Ÿàÿ≥Ÿäÿ∑ ŸÖÿ∫ŸÑŸÇÿå Ÿäÿ™ÿ≠ŸàŸÑ ÿßŸÑÿ•ŸÜÿ≥ÿßŸÜ ÿ•ŸÑŸâ ŸÖŸÜÿ™ÿ¨. ÿßŸÑÿ≥ŸäÿßÿØÿ© ÿ™ÿπŸäÿØ ÿßŸÑÿ•ŸÜÿ≥ÿßŸÜ ÿ•ŸÑŸâ ŸÖŸàÿ∂ÿπ ÿßŸÑŸÖŸèŸÇÿ±ÿ±." },
        identity_response:{ title: "ÿßŸÑÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ©", body: "ŸÜÿµŸÖŸÖ ÿ∑ÿ®ŸÇÿßÿ™: ŸáŸàŸäÿ© + ÿ®ŸäÿßŸÜÿßÿ™ + ŸàŸÉŸÑÿßÿ° + ŸÇŸäÿßÿ≥. ŸÉŸÑ ÿ∑ÿ®ŸÇÿ© ÿ™ŸèŸÇŸÅŸÑ ÿ®ÿßÿ®ÿßŸã ŸÖŸÜ ÿ£ÿ®Ÿàÿßÿ® ÿßŸÑÿ™ŸÑÿßÿπÿ®." }
      },

      chart1Title: "ÿßŸÑŸÖÿ≥ÿ™ŸáÿØŸÅ ŸÖŸÇÿßÿ®ŸÑ ÿßŸÑŸàÿßŸÇÿπ", chart1Hint:"Radar",
      chart2Title: "ŸÜÿ∂ÿ¨ ÿßŸÑŸÅÿµŸàÿµ",            chart2Hint:"Bar",
      chart3Title: "ÿ™ŸÇÿØŸÖ ÿßŸÑÿ¨ÿßŸáÿ≤Ÿäÿ©",         chart3Hint:"Line",
      chart4Title: "ÿÆÿ±Ÿäÿ∑ÿ© ÿßŸÑÿ£ÿ´ÿ±",           chart4Hint:"Doughnut",

      archA: "Lobe‚ÄëA: ÿßŸÑŸáŸàŸäÿ© ŸàÿßŸÑÿ≥Ÿäÿßÿ≥ÿßÿ™",
      archADesc:"ÿ™ÿπÿ±ŸäŸÅ ŸÖŸÜ ÿ£ŸÜÿ™‚Ä¶ ŸàŸÖÿß ÿßŸÑÿ∞Ÿä ŸäŸèÿ≥ŸÖÿ≠ ÿ®Ÿáÿå ŸàŸÑŸÖŸÜÿå ŸàŸÖÿ™Ÿâ.",
      archAList:["DID/Keys","ÿ≥Ÿäÿßÿ≥ÿßÿ™ ŸàÿµŸàŸÑ","ÿ™ŸàŸÇŸäÿπ/ÿ™ÿ≠ŸÇŸÇ","ÿ≥ÿ¨ŸÑ ŸÖŸàÿßŸÅŸÇÿßÿ™"],

      archB: "Lobe‚ÄëB: ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸàÿßŸÑŸÇŸäÿßÿ≥",
      archBDesc:"ÿ®ŸäÿßŸÜÿßÿ™ ÿ≥ŸäÿßÿØŸäÿ© ŸÇÿßÿ®ŸÑÿ© ŸÑŸÑÿ™ÿØŸÇŸäŸÇÿå ŸàŸÖŸÇÿßŸäŸäÿ≥ ÿ™ÿ¥ÿ±ÿ≠ ÿ£ÿ´ÿ± ÿßŸÑŸÇÿ±ÿßÿ±.",
      archBList:["Data Layer","Schemas","Metrics","Audit Log"],

      archC: "Lobe‚ÄëC: ÿßŸÑŸàŸÉŸÑÿßÿ° ŸàÿßŸÑÿ®ÿ±Ÿàÿ™ŸàŸÉŸàŸÑÿßÿ™",
      archCDesc:"ŸàŸÉŸÑÿßÿ° ŸäŸÜŸÅÿ∞ŸàŸÜ ŸÜŸàÿßŸäÿßŸÉ ÿπÿ®ÿ± ÿ®ÿ±Ÿàÿ™ŸàŸÉŸàŸÑÿßÿ™ ŸÜÿ¥ÿßÿ∑ ŸÖŸÅÿ™Ÿàÿ≠ÿ©.",
      archCList:["Agents","Activity Protocol","Orchestration","Policy Guards"],

      roadTitle: "ÿÆÿßÿ±ÿ∑ÿ© ÿßŸÑÿ∑ÿ±ŸäŸÇ",
      roadIntro: "ÿÆÿ∑Ÿàÿßÿ™ ÿµÿ∫Ÿäÿ±ÿ©‚Ä¶ ŸÑŸÉŸÜ ŸÉŸÑ ÿÆÿ∑Ÿàÿ© ÿ™ŸÇŸÅŸÑ ÿ´ÿ∫ÿ±ÿ© ÿ≥ŸäÿßÿØŸäÿ© Ÿàÿ™ŸÅÿ™ÿ≠ ŸÇÿØÿ±ÿ© ÿ¨ÿØŸäÿØÿ©.",
      timeline: [
        {v:"v1.0", t:"Manifesto Dashboard", d:"ŸÑŸàÿ≠ÿ© ÿ≥ŸäÿßÿØŸäÿ© (RTL/LTR) + ÿ™ÿµŸàÿ± ÿßŸÑŸáŸàŸäÿ©/ÿßŸÑŸÖÿπŸÖÿßÿ±Ÿäÿ©/ÿßŸÑÿ£ÿ´ÿ±."},
        {v:"v1.1", t:"Agent Layer", d:"ŸàŸÉŸÑÿßÿ° ŸÖÿπÿ±ŸÅŸäŸàŸÜ + ÿ≥Ÿäÿßÿ≥ÿßÿ™ ÿ≠ÿØŸàÿØ + ÿ≥ÿ¨ŸÑ ÿ£ŸàÿßŸÖÿ±."},
        {v:"v1.2", t:"Metrics & Governance", d:"ŸÇŸäÿßÿ≥ ÿ≠Ÿä + ÿ≠ŸàŸÉŸÖÿ© + ÿ™ÿØŸÇŸäŸÇ + ÿ™ŸÇÿßÿ±Ÿäÿ± ÿ£ÿ´ÿ±."}
      ],

      impactEcoTitle:"ÿßŸÑÿ£ÿ´ÿ± ÿßŸÑÿßŸÇÿ™ÿµÿßÿØŸä",
      impactEcoBody:"ÿÆŸÅÿ∂ ÿ™ŸÉŸÑŸÅÿ© ÿßŸÑŸàÿ≥ÿßÿ∑ÿ©ÿå Ÿàÿ™ÿ´ÿ®Ÿäÿ™ ÿßŸÑŸÇŸäŸÖÿ© ÿØÿßÿÆŸÑ ÿßŸÑÿßŸÇÿ™ÿµÿßÿØ ÿßŸÑŸÖÿ≠ŸÑŸä ÿπÿ®ÿ± ÿ≠ŸàŸÉŸÖÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸàÿßŸÑÿ¥ŸÅÿßŸÅŸäÿ©.",
      impactSocTitle:"ÿßŸÑÿ£ÿ´ÿ± ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπŸä",
      impactSocBody:"ÿ™ŸÇŸÑŸäŸÑ ÿßŸÑÿ™ŸÑÿßÿπÿ®ÿå ÿ™ŸÖŸÉŸäŸÜ ÿßŸÑÿ£ŸÅÿ±ÿßÿØÿå Ÿàÿ≤ŸäÿßÿØÿ© ÿßŸÑŸÖÿ≥ÿßÿ°ŸÑÿ© ÿπÿ®ÿ± Ÿàÿ∂Ÿàÿ≠ ŸÖÿ≥ÿßÿ± ÿßŸÑŸÇÿ±ÿßÿ±.",

      ecoKpis: [{k:"TCO",v:"-22%"},{k:"Lock‚Äëin",v:"-35%"},{k:"Speed",v:"+18%"}],
      socKpis: [{k:"Trust",v:"+26%"},{k:"Bias",v:"-14%"},{k:"Clarity",v:"+31%"}],

      faqTitle:"ÿ£ÿ≥ÿ¶ŸÑÿ© ÿ≥ÿ±Ÿäÿπÿ©",
      faq: [
        {q:"ŸáŸÑ Ÿáÿ∞ÿß ŸÖÿ¥ÿ±Ÿàÿπ ŸÖÿ™ÿµŸÅÿ≠ÿü", a:"ŸÑÿß‚Ä¶ ÿßŸÑŸÖÿ®ÿØÿ£ ŸÉŸäÿßŸÜ ÿ≥ŸäÿßÿØŸä ŸäŸèŸÖŸÉŸÜ ÿ£ŸÜ Ÿäÿ™ÿ¨ÿ≥ÿØ ŸÉŸÖÿ™ÿµŸÅÿ≠/ÿ™ÿ∑ÿ®ŸäŸÇ/ŸàŸÉŸäŸÑ."},
        {q:"ŸáŸÑ Ÿäÿ≠ÿ™ÿßÿ¨ buildÿü", a:"ŸÑÿß. Ÿáÿ∞Ÿá ŸÜÿ≥ÿÆÿ© Static ŸÑŸÑŸÜÿ¥ÿ± ÿßŸÑŸÅŸàÿ±Ÿäÿå ŸàŸäŸÖŸÉŸÜ ÿ™ÿ∑ŸàŸäÿ±Ÿáÿß ŸÑÿßÿ≠ŸÇÿßŸã ŸÑÿ£Ÿä ÿ•ÿ∑ÿßÿ±."},
        {q:"ŸÉŸäŸÅ ŸÜÿ±ÿ®ÿ∑ ÿ®ŸäÿßŸÜÿßÿ™ ÿ≠ŸÇŸäŸÇŸäÿ©ÿü", a:"ŸÜÿ∂ŸäŸÅ endpoints/ŸÖŸÑŸÅÿßÿ™ JSON ÿ´ŸÖ ÿ™ŸèŸÇÿ±ÿ£ Ÿàÿ™Ÿèÿ±ÿ≥ŸÖ ŸÖÿ®ÿßÿ¥ÿ±ÿ©."}
      ],

      footerLine:"ÿ£ŸÜÿ™ ŸÑÿß ÿ™ÿ®ŸÜŸä Ÿàÿßÿ¨Ÿáÿ©‚Ä¶ ÿ£ŸÜÿ™ ÿ™ÿ®ŸÜŸä ÿ≥ŸäÿßÿØÿ©."
    },

    en: {
      statusLine: "SOVEREIGN ONLINE ‚Ä¢ Multilingual Control Room ‚Ä¢ Static Pages (no build)",
      heroTitle: "Sovereign Control Room",
      heroSub: "A manifesto dashboard built with intent: Identity ‚Ä¢ Architecture ‚Ä¢ Roadmap ‚Ä¢ Impact ‚Äî every line serves cognitive sovereignty.",
      quoteLine: "‚ÄúWe‚Äôre not building a browser‚Ä¶ we‚Äôre building a digital entity that restores cognitive sovereignty.‚Äù",
      kbd1:"Typography",
      kbd2:"Manifesto",
      kbd3:"Roadmap",
      kpiTitle: "Sovereign KPIs",
      kpi1Label: "Transparency", kpi1Val: "92%",
      kpi2Label: "Privacy",      kpi2Val: "89%",
      kpi3Label: "Trust",        kpi3Val: "86%",
      buildLine: "Build: Static ‚Ä¢ Deploy: GitHub Pages",
      kpiFoot: "These are baseline indicators‚Äîready to be wired to real logs/metrics/policies.",

      manifestoTitle: "Manifesto ‚Äî Why Comet‚ÄëX?",
      manifestoBody: "Cognitive sovereignty is not a slogan; it‚Äôs decision architecture. When knowledge is shaped outside human context, it becomes a tool against them. Comet‚ÄëX restores ownership: where information comes from, how it‚Äôs understood, who sees it, and how it‚Äôs used.",
      p1Title: "Right to Context", p1Body: "Information without context becomes manipulation. We preserve source, intent, and time before output.",
      p2Title: "Right to Portability", p2Body: "Your data is not a platform hostage. Sovereign design assumes export, audit, and migration.",
      p3Title: "Right to Transparency", p3Body: "No black boxes. We expose decision impact, generation trace, and state evolution.",
      p4Title: "Right to Agency", p4Body: "Agents don‚Äôt lead users‚Äî they execute intent under user-defined policy.",

      threatTitle: "Threat Model",
      threatList: [
        "Capture: platforms decide what you see",
        "Lock‚Äëin: export and audit are blocked",
        "Tracking: profiling and measurement without clear consent",
        "Bias: models reproduce external preferences",
        "Context collapse: meaning stripped from its origin"
      ],
      threatFoot: "Response: open protocols + transparent logs + identity policy + fair metrics.",

      tabIdentity: "Identity & Conflict",
      tabArchitecture: "Tri‚ÄëLobe Architecture",
      tabRoadmap: "Roadmap & Destination",
      tabImpact: "Impact & Feasibility",

      card1Title: "Identity Core",   card1Body: "Sovereignty as a digital right: verifiable identity and visibility policy.",
      card2Title: "Threats",         card2Body: "Platform dominance, tracking, lock‚Äëin, and context collapse.",
      card3Title: "Response",        card3Body: "Agents + protocols + metrics + governance = sovereign decisions.",

      modal: {
        identity_core: { title: "Identity Core", body: "Identity is not an account‚Äîit‚Äôs decision authority. You define what enters, what leaves, and what can be built on your data." },
        identity_threats:{ title: "Threats", body: "When knowledge flows through closed intermediaries, humans become products. Sovereignty puts humans back as deciders." },
        identity_response:{ title: "Response", body: "Layered design: identity + data + agents + metrics. Each layer closes a manipulation vector." }
      },

      chart1Title: "Target vs Reality", chart1Hint:"Radar",
      chart2Title: "Lobe Maturity",     chart2Hint:"Bar",
      chart3Title: "Readiness Progress",chart3Hint:"Line",
      chart4Title: "Impact Map",        chart4Hint:"Doughnut",

      archA: "Lobe‚ÄëA: Identity & Policy",
      archADesc:"Define who you are, what‚Äôs allowed, for whom, and when.",
      archAList:["DID/Keys","Access policy","Signing/verification","Consent log"],

      archB: "Lobe‚ÄëB: Data & Metrics",
      archBDesc:"Auditable sovereign data plus metrics that explain decision impact.",
      archBList:["Data layer","Schemas","Metrics","Audit log"],

      archC: "Lobe‚ÄëC: Agents & Protocols",
      archCDesc:"Agents executing intent via open activity protocols.",
      archCList:["Agents","Activity Protocol","Orchestration","Policy guards"],

      roadTitle: "Roadmap",
      roadIntro: "Small steps, each closing a sovereignty gap and opening a new capability.",
      timeline: [
        {v:"v1.0", t:"Manifesto Dashboard", d:"RTL/LTR dashboard + identity/architecture/impact framing."},
        {v:"v1.1", t:"Agent Layer", d:"Cognitive agents + policy boundaries + command log."},
        {v:"v1.2", t:"Metrics & Governance", d:"Live metrics + governance + audit + impact reports."}
      ],

      impactEcoTitle:"Economic Impact",
      impactEcoBody:"Reduce middle‚Äëlayer cost and keep value inside local economies through data governance and transparency.",
      impactSocTitle:"Social Impact",
      impactSocBody:"Reduce manipulation, empower individuals, and increase accountability via decision traceability.",

      ecoKpis: [{k:"TCO",v:"-22%"},{k:"Lock‚Äëin",v:"-35%"},{k:"Speed",v:"+18%"}],
      socKpis: [{k:"Trust",v:"+26%"},{k:"Bias",v:"-14%"},{k:"Clarity",v:"+31%"}],

      faqTitle:"Quick FAQ",
      faq: [
        {q:"Is this a browser project?", a:"Not only. It‚Äôs a sovereign entity that can manifest as a browser/app/agent."},
        {q:"Do I need a build?", a:"No. This is a static deployable version; evolve it to any framework later."},
        {q:"How to wire real data?", a:"Add JSON endpoints/files, then render charts from them directly."}
      ],

      footerLine:"You‚Äôre not building a UI‚Ä¶ you‚Äôre building sovereignty."
    }
  };

  const el = (id) => document.getElementById(id);
  let lang = localStorage.getItem("cometx_lang") || "ar";
  let charts = {};

  function applyLang(){
    const t = I18N[lang];
    document.documentElement.lang = lang;
    document.documentElement.dir  = (lang === "ar") ? "rtl" : "ltr";
    document.body.style.fontFamily = (lang === "ar")
      ? "Tajawal, Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial"
      : "Inter, Tajawal, system-ui, -apple-system, Segoe UI, Roboto, Arial";

    el("statusLine").textContent = t.statusLine;
    el("heroTitle").textContent  = t.heroTitle;
    el("heroSub").textContent    = t.heroSub;
    el("quoteLine").textContent  = t.quoteLine;

    el("kbd1").textContent = t.kbd1;
    el("kbd2").textContent = t.kbd2;
    el("kbd3").textContent = t.kbd3;

    el("kpiTitle").textContent = t.kpiTitle;
    el("kpi1Label").textContent = t.kpi1Label; el("kpi1Val").textContent = t.kpi1Val;
    el("kpi2Label").textContent = t.kpi2Label; el("kpi2Val").textContent = t.kpi2Val;
    el("kpi3Label").textContent = t.kpi3Label; el("kpi3Val").textContent = t.kpi3Val;
    el("buildLine").textContent = t.buildLine;
    el("kpiFoot").textContent = t.kpiFoot;

    el("manifestoTitle").textContent = t.manifestoTitle;
    el("manifestoBody").textContent  = t.manifestoBody;
    el("p1Title").textContent = t.p1Title; el("p1Body").textContent = t.p1Body;
    el("p2Title").textContent = t.p2Title; el("p2Body").textContent = t.p2Body;
    el("p3Title").textContent = t.p3Title; el("p3Body").textContent = t.p3Body;
    el("p4Title").textContent = t.p4Title; el("p4Body").textContent = t.p4Body;

    el("threatTitle").textContent = t.threatTitle;
    el("threatList").innerHTML = t.threatList.map(x => `<li>${x}</li>`).join("");
    el("threatFoot").textContent = t.threatFoot;

    el("tabIdentity").textContent = t.tabIdentity;
    el("tabArchitecture").textContent = t.tabArchitecture;
    el("tabRoadmap").textContent = t.tabRoadmap;
    el("tabImpact").textContent = t.tabImpact;

    el("card1Title").textContent = t.card1Title; el("card1Body").textContent = t.card1Body;
    el("card2Title").textContent = t.card2Title; el("card2Body").textContent = t.card2Body;
    el("card3Title").textContent = t.card3Title; el("card3Body").textContent = t.card3Body;

    el("chart1Title").textContent = t.chart1Title; el("chart1Hint").textContent = t.chart1Hint;
    el("chart2Title").textContent = t.chart2Title; el("chart2Hint").textContent = t.chart2Hint;
    el("chart3Title").textContent = t.chart3Title; el("chart3Hint").textContent = t.chart3Hint;
    el("chart4Title").textContent = t.chart4Title; el("chart4Hint").textContent = t.chart4Hint;

    el("archA").textContent = t.archA; el("archADesc").textContent = t.archADesc;
    el("archB").textContent = t.archB; el("archBDesc").textContent = t.archBDesc;
    el("archC").textContent = t.archC; el("archCDesc").textContent = t.archCDesc;
    el("archAList").innerHTML = t.archAList.map(x=>`<li>${x}</li>`).join("");
    el("archBList").innerHTML = t.archBList.map(x=>`<li>${x}</li>`).join("");
    el("archCList").innerHTML = t.archCList.map(x=>`<li>${x}</li>`).join("");

    el("roadTitle").textContent = t.roadTitle;
    el("roadIntro").textContent = t.roadIntro;
    el("roadTimeline").innerHTML = t.timeline.map(item => `
      <div class="tl-item glass rounded-2xl mb-3">
        <span class="dot"></span>
        <div class="flex items-center gap-2">
          <span class="chip rounded-full px-3 py-1 text-xs font-mono">${item.v}</span>
          <span class="font-black text-slate-100">${item.t}</span>
        </div>
        <div class="mt-2 t-small">${item.d}</div>
      </div>
    `).join("");

    el("impactEcoTitle").textContent = t.impactEcoTitle;
    el("impactEcoBody").textContent = t.impactEcoBody;
    el("impactSocTitle").textContent = t.impactSocTitle;
    el("impactSocBody").textContent = t.impactSocBody;

    el("impactEcoKpis").innerHTML = t.ecoKpis.map(x => `
      <div class="glass rounded-xl p-3 text-center">
        <div class="text-[11px] text-slate-300">${x.k}</div>
        <div class="text-lg font-extrabold text-emerald-300">${x.v}</div>
      </div>
    `).join("");

    el("impactSocKpis").innerHTML = t.socKpis.map(x => `
      <div class="glass rounded-xl p-3 text-center">
        <div class="text-[11px] text-slate-300">${x.k}</div>
        <div class="text-lg font-extrabold text-cyan-300">${x.v}</div>
      </div>
    `).join("");

    el("faqTitle").textContent = t.faqTitle;
    el("faq").innerHTML = t.faq.map(x => `
      <details class="glass rounded-2xl p-4">
        <summary class="cursor-pointer font-black text-slate-100">${x.q}</summary>
        <div class="mt-2 t-small">${x.a}</div>
      </details>
    `).join("");

    el("footerLine").textContent = t.footerLine;

    // live link
    el("btnLive").href = SITE.liveUrl;

    // rebuild charts with translated labels
    buildCharts();
  }

  function switchTab(tabId){
    document.querySelectorAll(".view").forEach(v => v.classList.add("hidden"));
    el("view-" + tabId).classList.remove("hidden");
    document.querySelectorAll(".tab").forEach(b => {
      const active = b.dataset.tab === tabId;
      b.classList.toggle("tab-active", active);
      b.classList.toggle("tab-idle", !active);
    });
  }

  function openModal(key){
    const t = I18N[lang];
    const data = t.modal[key];
    if(!data) return;
    el("modalTitle").textContent = data.title;
    el("modalBody").textContent  = data.body;
    const m = el("modal");
    m.classList.remove("hidden"); m.classList.add("flex");
  }
  function closeModal(){
    const m = el("modal");
    m.classList.add("hidden"); m.classList.remove("flex");
  }

  function killCharts(){
    Object.values(charts).forEach(c => { try{ c.destroy(); }catch(e){} });
    charts = {};
  }

  function buildCharts(){
    if(!window.Chart) return;
    killCharts();

    Chart.defaults.font.family = (lang === "ar")
      ? "Tajawal, Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial"
      : "Inter, Tajawal, system-ui, -apple-system, Segoe UI, Roboto, Arial";
    Chart.defaults.color = "rgba(226,232,240,.85)";

    const radarLabels = (lang === "ar")
      ? ["ÿ≥ŸäÿßÿØÿ©","ÿ¥ŸÅÿßŸÅŸäÿ©","ÿÆÿµŸàÿµŸäÿ©","ŸÇÿßÿ®ŸÑŸäÿ© ÿßŸÑŸÜŸÇŸÑ","ŸÇÿßÿ®ŸÑŸäÿ© ÿßŸÑÿ™ÿØŸÇŸäŸÇ"]
      : ["Sovereignty","Transparency","Privacy","Portability","Auditability"];

    charts.identity = new Chart(document.getElementById("chartIdentity"), {
      type:"radar",
      data:{
        labels: radarLabels,
        datasets:[
          { label: (lang==="ar")?"ÿßŸÑŸÖÿ≥ÿ™ŸáÿØŸÅ":"Target", data:[95,90,92,88,85],
            borderColor:"#22d3ee", backgroundColor:"rgba(34,211,238,.18)", pointBackgroundColor:"#22d3ee" },
          { label: (lang==="ar")?"ÿßŸÑŸàÿßŸÇÿπ":"Reality", data:[60,40,35,30,25],
            borderColor:"#fb7185", backgroundColor:"rgba(251,113,133,.12)", pointBackgroundColor:"#fb7185" }
        ]
      },
      options:{
        scales:{ r:{ grid:{color:"rgba(148,163,184,.18)"}, angleLines:{color:"rgba(148,163,184,.18)"}, ticks:{showLabelBackdrop:false} } },
        plugins:{ legend:{ position:"top" } }
      }
    });

    charts.arch = new Chart(document.getElementById("chartArchitecture"), {
      type:"bar",
      data:{
        labels:["Lobe‚ÄëA","Lobe‚ÄëB","Lobe‚ÄëC"],
        datasets:[{
          label: (lang==="ar")?"ŸÜÿ∂ÿ¨ (%)":"Maturity (%)",
          data:[72,58,46],
          backgroundColor:["#34d399","#22d3ee","#a78bfa"]
        }]
      },
      options:{
        indexAxis:"y",
        scales:{ x:{max:100, grid:{color:"rgba(148,163,184,.12)"}}, y:{grid:{display:false}} },
        plugins:{ legend:{ display:false } }
      }
    });

    charts.road = new Chart(document.getElementById("chartRoadmap"), {
      type:"line",
      data:{
        labels:["v1.0","v1.1","v1.2"],
        datasets:[{
          label:(lang==="ar")?"ÿßŸÑÿ¨ÿßŸáÿ≤Ÿäÿ©":"Readiness",
          data:[48,72,88],
          borderColor:"#60a5fa",
          backgroundColor:"rgba(96,165,250,.18)",
          tension:.35,
          fill:true
        }]
      },
      options:{
        scales:{
          x:{grid:{color:"rgba(148,163,184,.12)"}},
          y:{grid:{color:"rgba(148,163,184,.12)"}, min:0, max:100}
        },
        plugins:{ legend:{ position:"bottom" } }
      }
    });

    const impactLabels = (lang==="ar")
      ? ["ÿßŸÇÿ™ÿµÿßÿØŸä","ÿßÿ¨ÿ™ŸÖÿßÿπŸä","ÿ™ŸÇŸÜŸä","ÿ™ŸÜÿ∏ŸäŸÖŸä"]
      : ["Economic","Social","Technical","Regulatory"];

    charts.impact = new Chart(document.getElementById("chartImpact"), {
      type:"doughnut",
      data:{
        labels: impactLabels,
        datasets:[{
          data:[33,27,22,18],
          backgroundColor:["#34d399","#22d3ee","#a78bfa","#fbbf24"],
          borderColor:"rgba(255,255,255,.08)"
        }]
      },
      options:{ plugins:{ legend:{ position:"right" } } }
    });
  }

  document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll(".tab").forEach(btn => btn.addEventListener("click", () => switchTab(btn.dataset.tab)));
    el("btnLang").addEventListener("click", () => {
      lang = (lang==="ar") ? "en" : "ar";
      localStorage.setItem("cometx_lang", lang);
      applyLang();
    });
    el("modalClose").addEventListener("click", closeModal);
    el("modal").addEventListener("click", (e)=>{ if(e.target===el("modal")) closeModal(); });

    applyLang();
    switchTab("identity");
  });
</script>
</body>
</html>
